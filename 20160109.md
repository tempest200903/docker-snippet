## 20160109

p.77 (2.3.1) 同一ホスト上でのコンテナーの連携

### history

```
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# history | tail -44
  273  docker ps
  274  docker attach mysql01
  275  pwd
  276  cd ..
  277  ls
  278  git 
  279  git clone https://github.com/enakai00/build_shorturl
  280  cd build_shorturl/
  281  git checkout dockerbon
  282  git branch -v
  283  cp pre-commit .git/hooks/
  284  cat pre-commit 
  285  git commit -a -m "Commit to build an image." 
  286  cat build_info 
  287  pwd
  288  emacs ~
  289  git commit -a -m "Commit to build an image." 
  290  docker run -itd -p 8000:80 --link mysql01:db --name shorturl_01 decoy2015/shorturl:ver1.0
  291  docker ps
  292  docker run -itd -p 8000:80 --link mysql01:db --name shorturl_01 decoy2015/shorturl:ver1.0
  293  docker ps
  294  docker images
  295  docker ps -a
  296  docker rm 89bdb4eff36d
  297  service docker start
  298  docker rm 89bdb4eff36d
  299  docker ps -a
  300  docker run -itd -p 8000:80 --link mysql01:db --name shorturl_01 decoy2015/shorturl:ver1.0
  301  docker ps -a
  302  docker ps
  303  history | grep run
  304  docker run -itd --name mysql01 decoy2015/mysql:ver1.0
  305  docker rm mysql01
  306  docker run -itd --name mysql01 decoy2015/mysql:ver1.0
  307  docker ps
  308  docker run -itd -p 8000:80 --link mysql01:db --name shorturl_01 decoy2015/shorturl:ver1.0
  309  docker ps -a | grep shorturl_01
  310  docker rm decoy2015/shorturl:ver1.0
  311  docker rm 6cacab4e47cf
  312  docker run -itd -p 8000:80 --link mysql01:db --name shorturl_01 decoy2015/shorturl:ver1.0
  313  docker ps
  314  docker attach a7a092b833a9
  315  history | tail -33
  316  history | tail -44
```

### script

```
[root@centos-1gb-sgp1-01-docker ~]# mkdir ~/build_mysql
[root@centos-1gb-sgp1-01-docker ~]# cd !$
cd ~/build_mysql
[root@centos-1gb-sgp1-01-docker build_mysql]# pwd
/root/build_mysql
[root@centos-1gb-sgp1-01-docker build_mysql]# emacs .

[1]+  停止                  emacs .
[root@centos-1gb-sgp1-01-docker build_mysql]# 
[root@centos-1gb-sgp1-01-docker build_mysql]# time docker build -t decoy2015/mysql:ver1.0 ~/build_msql
unable to prepare context: unable to evaluate symlinks in context path: lstat /root/build_msql: no such file or directory

real   0m0.048s
user   0m0.023s
sys    0m0.023s
[root@centos-1gb-sgp1-01-docker build_mysql]# file /root/build_msql
/root/build_msql: cannot open (No such file or directory)
[root@centos-1gb-sgp1-01-docker build_mysql]# pwd
/root/build_mysql
[root@centos-1gb-sgp1-01-docker build_mysql]# echo /root/build_msql
/root/build_msql
[root@centos-1gb-sgp1-01-docker build_mysql]# fg
emacs .

[1]+  停止                  emacs .
[root@centos-1gb-sgp1-01-docker build_mysql]# fg
emacs .

[1]+  停止                  emacs .
[root@centos-1gb-sgp1-01-docker build_mysql]# docker attatch mysql01
docker: 'attatch' is not a docker command.
See 'docker --help'.
[root@centos-1gb-sgp1-01-docker build_mysql]# docker attach mysql01

[root@cae423c70443 /]# mysql shorturl_service -u nodeuser -e " \
> desc url_list;
> "
+-------+--------------+------+-----+---------+-------+
| Field | Type         | Null | Key | Default | Extra |
+-------+--------------+------+-----+---------+-------+
| hash  | char(12)     | NO   | PRI | NULL    |       |
| url   | varchar(256) | NO   | UNI | NULL    |       |
+-------+--------------+------+-----+---------+-------+
[root@cae423c70443 /]# fg
bash: fg: current: no such job
[root@cae423c70443 /]# [root@centos-1gb-sgp1-01-docker build_mysql]# fg
emacs .

[1]+  停止                  emacs ~
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# git commit -a -m "Commit to build an image." 
Building an image decoy2015/shorturl:ver1.0...
Sending build context to Docker daemon 13.82 kB
Step 0 : FROM enakai00/centos:centos6
 ---> a005304e4e74
Step 1 : MAINTAINER Etsuji Nakai
 ---> Using cache
 ---> e9e66618e2fb
Step 2 : RUN yum -y install epel-release
 ---> Running in efb050328593
Loaded plugins: fastestmirror
Setting up Install Process
Resolving Dependencies
--> Running transaction check
---> Package epel-release.noarch 0:6-8 will be installed
--> Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package                Arch             Version         Repository        Size
================================================================================
Installing:
 epel-release           noarch           6-8             extras            14 k

Transaction Summary
================================================================================
Install       1 Package(s)

Total download size: 14 k
Installed size: 22 k
Downloading Packages:
warning: rpmts_HdrFromFdno: Header V3 RSA/SHA1 Signature, key ID c105b9de: NOKEY
Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6
Importing GPG key 0xC105B9DE:
 Userid : CentOS-6 Key (CentOS 6 Official Signing Key) <centos-6-key@centos.org>
 Package: centos-release-6-6.el6.centos.12.2.x86_64 (@CentOS/$releasever)
 From   : /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6
Running rpm_check_debug
Running Transaction Test
Transaction Test Succeeded
Running Transaction
Warning: RPMDB altered outside of yum.
  Installing : epel-release-6-8.noarch                                      1/1 
  Verifying  : epel-release-6-8.noarch                                      1/1 

Installed:
  epel-release.noarch 0:6-8                                                     

Complete!
 ---> 9988dd1ee2d6
Removing intermediate container efb050328593
Step 3 : RUN yum -y install nodejs nodejs-mysql nodejs-ejs nodejs-express
 ---> Running in f0057855670e
Loaded plugins: fastestmirror
Setting up Install Process
Determining fastest mirrors
 * base: mirror.1000mbps.com
 * epel: mirror.bytemark.co.uk
 * extras: mirror.cj2.nl
 * updates: mirror.sitbv.nl
Resolving Dependencies
--> Running transaction check
---> Package nodejs.x86_64 0:0.10.36-3.el6 will be installed
--> Processing Dependency: v8(x86-64) < 1:3.15 for package: nodejs-0.10.36-3.el6.x86_64
--> Processing Dependency: v8(x86-64) >= 1:3.14.5.10-17 for package: nodejs-0.10.36-3.el6.x86_64
--> Processing Dependency: libv8.so.3()(64bit) for package: nodejs-0.10.36-3.el6.x86_64
--> Processing Dependency: libuv.so.0.10()(64bit) for package: nodejs-0.10.36-3.el6.x86_64
--> Processing Dependency: libhttp_parser.so.2()(64bit) for package: nodejs-0.10.36-3.el6.x86_64
--> Processing Dependency: libcares19.so.2()(64bit) for package: nodejs-0.10.36-3.el6.x86_64
---> Package nodejs-ejs.noarch 0:1.0.0-1.el6 will be installed
---> Package nodejs-express.noarch 0:3.5.2-2.el6 will be installed
--> Processing Dependency: npm(connect) = 2.14.5 for package: nodejs-express-3.5.2-2.el6.noarch
--> Processing Dependency: npm(send) < 0.4 for package: nodejs-express-3.5.2-2.el6.noarch
--> Processing Dependency: npm(range-parser) < 1.1 for package: nodejs-express-3.5.2-2.el6.noarch
--> Processing Dependency: npm(mkdirp) < 1 for package: nodejs-express-3.5.2-2.el6.noarch
--> Processing Dependency: npm(methods) < 0.2 for package: nodejs-express-3.5.2-2.el6.noarch
--> Processing Dependency: npm(merge-descriptors) < 0.1 for package: nodejs-express-3.5.2-2.el6.noarch
--> Processing Dependency: npm(fresh) < 0.3 for package: nodejs-express-3.5.2-2.el6.noarch
--> Processing Dependency: npm(debug) < 1 for package: nodejs-express-3.5.2-2.el6.noarch
--> Processing Dependency: npm(cookie-signature) < 1.1 for package: nodejs-express-3.5.2-2.el6.noarch
--> Processing Dependency: npm(cookie) < 0.2 for package: nodejs-express-3.5.2-2.el6.noarch
--> Processing Dependency: npm(buffer-crc32) < 0.3 for package: nodejs-express-3.5.2-2.el6.noarch
--> Processing Dependency: npm(send) >= 0.3.0 for package: nodejs-express-3.5.2-2.el6.noarch
--> Processing Dependency: npm(range-parser) >= 1.0.0 for package: nodejs-express-3.5.2-2.el6.noarch
--> Processing Dependency: npm(mkdirp) >= 0.3 for package: nodejs-express-3.5.2-2.el6.noarch
--> Processing Dependency: npm(methods) >= 0.1.0 for package: nodejs-express-3.5.2-2.el6.noarch
--> Processing Dependency: npm(merge-descriptors) >= 0.0.2 for package: nodejs-express-3.5.2-2.el6.noarch
--> Processing Dependency: npm(fresh) >= 0.2.2 for package: nodejs-express-3.5.2-2.el6.noarch
--> Processing Dependency: npm(debug) >= 0.7 for package: nodejs-express-3.5.2-2.el6.noarch
--> Processing Dependency: npm(cookie-signature) >= 1.0.3 for package: nodejs-express-3.5.2-2.el6.noarch
--> Processing Dependency: npm(cookie) >= 0.1.2 for package: nodejs-express-3.5.2-2.el6.noarch
--> Processing Dependency: npm(commander) >= 1.3.2 for package: nodejs-express-3.5.2-2.el6.noarch
--> Processing Dependency: npm(buffer-crc32) >= 0.2.1 for package: nodejs-express-3.5.2-2.el6.noarch
---> Package nodejs-mysql.noarch 0:2.0.0-alpha9.2.el6.2 will be installed
--> Processing Dependency: npm(require-all) >= 0.0.3 for package: nodejs-mysql-2.0.0-alpha9.2.el6.2.noarch
--> Processing Dependency: npm(bignumber.js) >= 1.0.1 for package: nodejs-mysql-2.0.0-alpha9.2.el6.2.noarch
--> Running transaction check
---> Package c-ares19.x86_64 0:1.9.1-5.el6.3 will be installed
---> Package http-parser.x86_64 0:2.0-4.20121128gitcd01361.el6 will be installed
---> Package libuv.x86_64 1:0.10.34-1.el6 will be installed
---> Package nodejs-bignumber-js.noarch 0:1.2.0-4.el6 will be installed
---> Package nodejs-buffer-crc32.noarch 0:0.2.1-6.el6 will be installed
---> Package nodejs-commander.noarch 0:2.2.0-2.el6 will be installed
---> Package nodejs-connect.noarch 0:2.14.5-3.el6 will be installed
--> Processing Dependency: npm(vhost) < 2 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(static-favicon) < 1.1 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(setimmediate) < 1.1 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(serve-static) < 2 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(serve-index) < 1.1 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(response-time) < 2 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(raw-body) < 1.2 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(qs) < 0.7 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(pause) < 0.1 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(multiparty) < 3.3 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(morgan) < 2 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(method-override) < 2 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(express-session) < 1.1 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(errorhandler) < 2 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(csurf) < 2 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(cookie-parser) < 1.1 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(connect-timeout) < 2 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(compression) < 2 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(bytes) < 1 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(basic-auth-connect) < 2 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(vhost) >= 1.0 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(static-favicon) >= 1.0.2 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(setimmediate) >= 1.0.1 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(serve-static) >= 1.0 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(serve-index) >= 1.0.1 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(response-time) >= 1.0 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(raw-body) >= 1.1.4 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(qs) >= 0.6.6 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(pause) >= 0.0.1 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(multiparty) >= 3.2.3 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(morgan) >= 1.0 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(method-override) >= 1.0 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(express-session) >= 1.0.2 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(errorhandler) >= 1.0 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(csurf) >= 1.1 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(cookie-parser) >= 1.0.1 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(connect-timeout) >= 1.0 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(compression) >= 1.0 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(bytes) >= 0.3 for package: nodejs-connect-2.14.5-3.el6.noarch
--> Processing Dependency: npm(basic-auth-connect) >= 1.0 for package: nodejs-connect-2.14.5-3.el6.noarch
---> Package nodejs-cookie.noarch 0:0.1.2-2.el6 will be installed
---> Package nodejs-cookie-signature.noarch 0:1.0.3-1.el6 will be installed
---> Package nodejs-debug.noarch 0:0.8.1-2.el6 will be installed
---> Package nodejs-fresh.noarch 0:0.2.2-1.el6 will be installed
---> Package nodejs-merge-descriptors.noarch 0:0.0.2-1.el6 will be installed
---> Package nodejs-methods.noarch 0:0.1.0-1.el6 will be installed
---> Package nodejs-mkdirp.noarch 0:0.3.5-3.el6 will be installed
---> Package nodejs-range-parser.noarch 0:1.0.0-1.el6 will be installed
---> Package nodejs-require-all.noarch 0:0.0.6-3.el6 will be installed
---> Package nodejs-send.noarch 0:0.3.0-4.el6 will be installed
--> Processing Dependency: npm(mime) = 1.2.11 for package: nodejs-send-0.3.0-4.el6.noarch
---> Package v8.x86_64 1:3.14.5.10-17.el6 will be installed
--> Processing Dependency: libicuuc.so.42()(64bit) for package: 1:v8-3.14.5.10-17.el6.x86_64
--> Processing Dependency: libicui18n.so.42()(64bit) for package: 1:v8-3.14.5.10-17.el6.x86_64
--> Processing Dependency: libicudata.so.42()(64bit) for package: 1:v8-3.14.5.10-17.el6.x86_64
--> Running transaction check
---> Package libicu.x86_64 0:4.2.1-12.el6 will be installed
---> Package nodejs-basic-auth-connect.noarch 0:1.0.0-1.el6 will be installed
---> Package nodejs-bytes.noarch 0:0.3.0-2.el6 will be installed
---> Package nodejs-compression.noarch 0:1.0.1-3.el6 will be installed
--> Processing Dependency: npm(negotiator) < 0.5 for package: nodejs-compression-1.0.1-3.el6.noarch
--> Processing Dependency: npm(compressible) < 1.1 for package: nodejs-compression-1.0.1-3.el6.noarch
--> Processing Dependency: npm(negotiator) >= 0.4.2 for package: nodejs-compression-1.0.1-3.el6.noarch
--> Processing Dependency: npm(compressible) >= 1.0.0 for package: nodejs-compression-1.0.1-3.el6.noarch
---> Package nodejs-connect-timeout.noarch 0:1.0.0-1.el6 will be installed
---> Package nodejs-cookie-parser.noarch 0:1.0.1-4.el6 will be installed
---> Package nodejs-csurf.noarch 0:1.1.0-2.el6 will be installed
--> Processing Dependency: npm(uid2) < 0.1 for package: nodejs-csurf-1.1.0-2.el6.noarch
--> Processing Dependency: npm(scmp) < 0.1 for package: nodejs-csurf-1.1.0-2.el6.noarch
--> Processing Dependency: npm(uid2) >= 0.0.2 for package: nodejs-csurf-1.1.0-2.el6.noarch
--> Processing Dependency: npm(scmp) >= 0.0.3 for package: nodejs-csurf-1.1.0-2.el6.noarch
---> Package nodejs-errorhandler.noarch 0:1.0.0-2.el6 will be installed
---> Package nodejs-express-session.noarch 0:1.0.2-3.el6 will be installed
--> Processing Dependency: npm(utils-merge) = 1.0.0 for package: nodejs-express-session-1.0.2-3.el6.noarch
---> Package nodejs-method-override.noarch 0:1.0.0-1.el6 will be installed
---> Package nodejs-mime.noarch 0:1.2.11-1.el6 will be installed
---> Package nodejs-morgan.noarch 0:1.0.0-3.el6 will be installed
---> Package nodejs-multiparty.noarch 0:3.2.4-2.el6 will be installed
--> Processing Dependency: npm(stream-counter) < 1 for package: nodejs-multiparty-3.2.4-2.el6.noarch
--> Processing Dependency: npm(stream-counter) >= 0.2 for package: nodejs-multiparty-3.2.4-2.el6.noarch
---> Package nodejs-pause.noarch 0:0.0.1-3.el6 will be installed
---> Package nodejs-qs.noarch 0:0.6.6-3.el6 will be installed
---> Package nodejs-raw-body.noarch 0:1.1.4-2.el6 will be installed
---> Package nodejs-response-time.noarch 0:1.0.0-1.el6 will be installed
---> Package nodejs-serve-index.noarch 0:1.0.1-4.el6 will be installed
--> Processing Dependency: npm(batch) < 1 for package: nodejs-serve-index-1.0.1-4.el6.noarch
--> Processing Dependency: npm(batch) >= 0.5 for package: nodejs-serve-index-1.0.1-4.el6.noarch
---> Package nodejs-serve-static.noarch 0:1.1.0-2.el6 will be installed
--> Processing Dependency: npm(parseurl) < 2 for package: nodejs-serve-static-1.1.0-2.el6.noarch
--> Processing Dependency: npm(parseurl) >= 1.0 for package: nodejs-serve-static-1.1.0-2.el6.noarch
---> Package nodejs-setimmediate.noarch 0:1.0.1-2.el6 will be installed
---> Package nodejs-static-favicon.noarch 0:1.0.2-2.el6 will be installed
---> Package nodejs-vhost.noarch 0:1.0.0-1.el6 will be installed
--> Running transaction check
---> Package nodejs-batch.noarch 0:0.5.0-2.el6 will be installed
---> Package nodejs-compressible.noarch 0:1.0.1-2.el6 will be installed
---> Package nodejs-negotiator.noarch 0:0.4.3-2.el6 will be installed
---> Package nodejs-parseurl.noarch 0:1.0.1-2.el6 will be installed
---> Package nodejs-scmp.noarch 0:0.0.3-2.el6 will be installed
---> Package nodejs-stream-counter.noarch 0:0.2.0-3.el6 will be installed
---> Package nodejs-uid2.noarch 0:0.0.3-3.el6 will be installed
---> Package nodejs-utils-merge.noarch 0:1.0.0-1.el6 will be installed
--> Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package                    Arch    Version                         Repository
                                                                           Size
================================================================================
Installing:
 nodejs                     x86_64  0.10.36-3.el6                   epel  521 k
 nodejs-ejs                 noarch  1.0.0-1.el6                     epel   15 k
 nodejs-express             noarch  3.5.2-2.el6                     epel   76 k
 nodejs-mysql               noarch  2.0.0-alpha9.2.el6.2            epel   82 k
Installing for dependencies:
 c-ares19                   x86_64  1.9.1-5.el6.3                   epel   73 k
 http-parser                x86_64  2.0-4.20121128gitcd01361.el6    epel   22 k
 libicu                     x86_64  4.2.1-12.el6                    base  4.9 M
 libuv                      x86_64  1:0.10.34-1.el6                 epel   57 k
 nodejs-basic-auth-connect  noarch  1.0.0-1.el6                     epel  6.3 k
 nodejs-batch               noarch  0.5.0-2.el6                     epel  7.2 k
 nodejs-bignumber-js        noarch  1.2.0-4.el6                     epel  2.1 M
 nodejs-buffer-crc32        noarch  0.2.1-6.el6                     epel  8.2 k
 nodejs-bytes               noarch  0.3.0-2.el6                     epel  6.3 k
 nodejs-commander           noarch  2.2.0-2.el6                     epel   15 k
 nodejs-compressible        noarch  1.0.1-2.el6                     epel  7.6 k
 nodejs-compression         noarch  1.0.1-3.el6                     epel  7.6 k
 nodejs-connect             noarch  2.14.5-3.el6                    epel  103 k
 nodejs-connect-timeout     noarch  1.0.0-1.el6                     epel  5.6 k
 nodejs-cookie              noarch  0.1.2-2.el6                     epel  7.3 k
 nodejs-cookie-parser       noarch  1.0.1-4.el6                     epel  6.9 k
 nodejs-cookie-signature    noarch  1.0.3-1.el6                     epel  6.2 k
 nodejs-csurf               noarch  1.1.0-2.el6                     epel  6.9 k
 nodejs-debug               noarch  0.8.1-2.el6                     epel  8.8 k
 nodejs-errorhandler        noarch  1.0.0-2.el6                     epel  7.9 k
 nodejs-express-session     noarch  1.0.2-3.el6                     epel   12 k
 nodejs-fresh               noarch  0.2.2-1.el6                     epel  6.3 k
 nodejs-merge-descriptors   noarch  0.0.2-1.el6                     epel  5.0 k
 nodejs-method-override     noarch  1.0.0-1.el6                     epel  5.6 k
 nodejs-methods             noarch  0.1.0-1.el6                     epel  5.5 k
 nodejs-mime                noarch  1.2.11-1.el6                    epel   22 k
 nodejs-mkdirp              noarch  0.3.5-3.el6                     epel  7.2 k
 nodejs-morgan              noarch  1.0.0-3.el6                     epel  7.6 k
 nodejs-multiparty          noarch  3.2.4-2.el6                     epel   15 k
 nodejs-negotiator          noarch  0.4.3-2.el6                     epel  9.8 k
 nodejs-parseurl            noarch  1.0.1-2.el6                     epel  5.1 k
 nodejs-pause               noarch  0.0.1-3.el6                     epel  5.2 k
 nodejs-qs                  noarch  0.6.6-3.el6                     epel  8.4 k
 nodejs-range-parser        noarch  1.0.0-1.el6                     epel  6.2 k
 nodejs-raw-body            noarch  1.1.4-2.el6                     epel  7.6 k
 nodejs-require-all         noarch  0.0.6-3.el6                     epel  8.1 k
 nodejs-response-time       noarch  1.0.0-1.el6                     epel  5.1 k
 nodejs-scmp                noarch  0.0.3-2.el6                     epel  5.7 k
 nodejs-send                noarch  0.3.0-4.el6                     epel   13 k
 nodejs-serve-index         noarch  1.0.1-4.el6                     epel   71 k
 nodejs-serve-static        noarch  1.1.0-2.el6                     epel  7.3 k
 nodejs-setimmediate        noarch  1.0.1-2.el6                     epel  9.2 k
 nodejs-static-favicon      noarch  1.0.2-2.el6                     epel  6.9 k
 nodejs-stream-counter      noarch  0.2.0-3.el6                     epel  5.6 k
 nodejs-uid2                noarch  0.0.3-3.el6                     epel  5.2 k
 nodejs-utils-merge         noarch  1.0.0-1.el6                     epel  5.4 k
 nodejs-vhost               noarch  1.0.0-1.el6                     epel  5.3 k
 v8                         x86_64  1:3.14.5.10-17.el6              epel  3.0 M

Transaction Summary
================================================================================
Install      52 Package(s)

Total download size: 11 M
Installed size: 38 M
Downloading Packages:
--------------------------------------------------------------------------------
Total                                           319 kB/s |  11 MB     00:36     
Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-6
warning: rpmts_HdrFromFdno: Header V3 RSA/SHA256 Signature, key ID 0608b895: NOKEY
Importing GPG key 0x0608B895:
 Userid : EPEL (6) <epel@fedoraproject.org>
 Package: epel-release-6-8.noarch (@extras)
 From   : /etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-6
Running rpm_check_debug
Running Transaction Test
Transaction Test Succeeded
Running Transaction
  Installing : c-ares19-1.9.1-5.el6.3.x86_64                               1/52 
  Installing : libicu-4.2.1-12.el6.x86_64                                  2/52 
  Installing : 1:v8-3.14.5.10-17.el6.x86_64                                3/52 
  Installing : 1:libuv-0.10.34-1.el6.x86_64                                4/52 
  Installing : http-parser-2.0-4.20121128gitcd01361.el6.x86_64             5/52 
  Installing : nodejs-0.10.36-3.el6.x86_64                                 6/52 
  Installing : nodejs-debug-0.8.1-2.el6.noarch                             7/52 
  Installing : nodejs-bytes-0.3.0-2.el6.noarch                             8/52 
  Installing : nodejs-cookie-signature-1.0.3-1.el6.noarch                  9/52 
  Installing : nodejs-fresh-0.2.2-1.el6.noarch                            10/52 
  Installing : nodejs-cookie-0.1.2-2.el6.noarch                           11/52 
  Installing : nodejs-buffer-crc32-0.2.1-6.el6.noarch                     12/52 
  Installing : nodejs-range-parser-1.0.0-1.el6.noarch                     13/52 
  Installing : nodejs-methods-0.1.0-1.el6.noarch                          14/52 
  Installing : nodejs-uid2-0.0.3-3.el6.noarch                             15/52 
  Installing : nodejs-negotiator-0.4.3-2.el6.noarch                       16/52 
  Installing : nodejs-method-override-1.0.0-1.el6.noarch                  17/52 
  Installing : nodejs-cookie-parser-1.0.1-4.el6.noarch                    18/52 
  Installing : nodejs-raw-body-1.1.4-2.el6.noarch                         19/52 
  Installing : nodejs-morgan-1.0.0-3.el6.noarch                           20/52 
  Installing : nodejs-connect-timeout-1.0.0-1.el6.noarch                  21/52 
  Installing : nodejs-static-favicon-1.0.2-2.el6.noarch                   22/52 
  Installing : nodejs-pause-0.0.1-3.el6.noarch                            23/52 
  Installing : nodejs-basic-auth-connect-1.0.0-1.el6.noarch               24/52 
  Installing : nodejs-utils-merge-1.0.0-1.el6.noarch                      25/52 
  Installing : nodejs-express-session-1.0.2-3.el6.noarch                  26/52 
  Installing : nodejs-mkdirp-0.3.5-3.el6.noarch                           27/52 
  Installing : nodejs-merge-descriptors-0.0.2-1.el6.noarch                28/52 
  Installing : nodejs-mime-1.2.11-1.el6.noarch                            29/52 
  Installing : nodejs-send-0.3.0-4.el6.noarch                             30/52 
  Installing : nodejs-commander-2.2.0-2.el6.noarch                        31/52 
  Installing : nodejs-scmp-0.0.3-2.el6.noarch                             32/52 
  Installing : nodejs-csurf-1.1.0-2.el6.noarch                            33/52 
  Installing : nodejs-batch-0.5.0-2.el6.noarch                            34/52 
  Installing : nodejs-serve-index-1.0.1-4.el6.noarch                      35/52 
  Installing : nodejs-compressible-1.0.1-2.el6.noarch                     36/52 
  Installing : nodejs-compression-1.0.1-3.el6.noarch                      37/52 
  Installing : nodejs-qs-0.6.6-3.el6.noarch                               38/52 
  Installing : nodejs-errorhandler-1.0.0-2.el6.noarch                     39/52 
  Installing : nodejs-bignumber-js-1.2.0-4.el6.noarch                     40/52 
  Installing : nodejs-vhost-1.0.0-1.el6.noarch                            41/52 
  Installing : nodejs-parseurl-1.0.1-2.el6.noarch                         42/52 
  Installing : nodejs-serve-static-1.1.0-2.el6.noarch                     43/52 
  Installing : nodejs-require-all-0.0.6-3.el6.noarch                      44/52 
  Installing : nodejs-response-time-1.0.0-1.el6.noarch                    45/52 
  Installing : nodejs-setimmediate-1.0.1-2.el6.noarch                     46/52 
  Installing : nodejs-stream-counter-0.2.0-3.el6.noarch                   47/52 
  Installing : nodejs-multiparty-3.2.4-2.el6.noarch                       48/52 
  Installing : nodejs-connect-2.14.5-3.el6.noarch                         49/52 
  Installing : nodejs-express-3.5.2-2.el6.noarch                          50/52 
  Installing : nodejs-mysql-2.0.0-alpha9.2.el6.2.noarch                   51/52 
  Installing : nodejs-ejs-1.0.0-1.el6.noarch                              52/52 
  Verifying  : nodejs-express-3.5.2-2.el6.noarch                           1/52 
  Verifying  : nodejs-static-favicon-1.0.2-2.el6.noarch                    2/52 
  Verifying  : nodejs-pause-0.0.1-3.el6.noarch                             3/52 
  Verifying  : nodejs-range-parser-1.0.0-1.el6.noarch                      4/52 
  Verifying  : nodejs-basic-auth-connect-1.0.0-1.el6.noarch                5/52 
  Verifying  : nodejs-utils-merge-1.0.0-1.el6.noarch                       6/52 
  Verifying  : nodejs-mkdirp-0.3.5-3.el6.noarch                            7/52 
  Verifying  : nodejs-csurf-1.1.0-2.el6.noarch                             8/52 
  Verifying  : nodejs-merge-descriptors-0.0.2-1.el6.noarch                 9/52 
  Verifying  : nodejs-mime-1.2.11-1.el6.noarch                            10/52 
  Verifying  : http-parser-2.0-4.20121128gitcd01361.el6.x86_64            11/52 
  Verifying  : nodejs-compression-1.0.1-3.el6.noarch                      12/52 
  Verifying  : nodejs-commander-2.2.0-2.el6.noarch                        13/52 
  Verifying  : nodejs-serve-static-1.1.0-2.el6.noarch                     14/52 
  Verifying  : nodejs-raw-body-1.1.4-2.el6.noarch                         15/52 
  Verifying  : nodejs-scmp-0.0.3-2.el6.noarch                             16/52 
  Verifying  : nodejs-method-override-1.0.0-1.el6.noarch                  17/52 
  Verifying  : nodejs-batch-0.5.0-2.el6.noarch                            18/52 
  Verifying  : nodejs-cookie-parser-1.0.1-4.el6.noarch                    19/52 
  Verifying  : nodejs-express-session-1.0.2-3.el6.noarch                  20/52 
  Verifying  : nodejs-methods-0.1.0-1.el6.noarch                          21/52 
  Verifying  : nodejs-morgan-1.0.0-3.el6.noarch                           22/52 
  Verifying  : nodejs-connect-timeout-1.0.0-1.el6.noarch                  23/52 
  Verifying  : 1:libuv-0.10.34-1.el6.x86_64                               24/52 
  Verifying  : nodejs-serve-index-1.0.1-4.el6.noarch                      25/52 
  Verifying  : nodejs-0.10.36-3.el6.x86_64                                26/52 
  Verifying  : libicu-4.2.1-12.el6.x86_64                                 27/52 
  Verifying  : nodejs-compressible-1.0.1-2.el6.noarch                     28/52 
  Verifying  : nodejs-qs-0.6.6-3.el6.noarch                               29/52 
  Verifying  : 1:v8-3.14.5.10-17.el6.x86_64                               30/52 
  Verifying  : nodejs-fresh-0.2.2-1.el6.noarch                            31/52 
  Verifying  : nodejs-errorhandler-1.0.0-2.el6.noarch                     32/52 
  Verifying  : nodejs-multiparty-3.2.4-2.el6.noarch                       33/52 
  Verifying  : nodejs-connect-2.14.5-3.el6.noarch                         34/52 
  Verifying  : nodejs-ejs-1.0.0-1.el6.noarch                              35/52 
  Verifying  : nodejs-bignumber-js-1.2.0-4.el6.noarch                     36/52 
  Verifying  : nodejs-vhost-1.0.0-1.el6.noarch                            37/52 
  Verifying  : nodejs-bytes-0.3.0-2.el6.noarch                            38/52 
  Verifying  : nodejs-send-0.3.0-4.el6.noarch                             39/52 
  Verifying  : nodejs-cookie-signature-1.0.3-1.el6.noarch                 40/52 
  Verifying  : nodejs-parseurl-1.0.1-2.el6.noarch                         41/52 
  Verifying  : nodejs-require-all-0.0.6-3.el6.noarch                      42/52 
  Verifying  : nodejs-mysql-2.0.0-alpha9.2.el6.2.noarch                   43/52 
  Verifying  : nodejs-response-time-1.0.0-1.el6.noarch                    44/52 
  Verifying  : nodejs-setimmediate-1.0.1-2.el6.noarch                     45/52 
  Verifying  : nodejs-uid2-0.0.3-3.el6.noarch                             46/52 
  Verifying  : c-ares19-1.9.1-5.el6.3.x86_64                              47/52 
  Verifying  : nodejs-cookie-0.1.2-2.el6.noarch                           48/52 
  Verifying  : nodejs-stream-counter-0.2.0-3.el6.noarch                   49/52 
  Verifying  : nodejs-debug-0.8.1-2.el6.noarch                            50/52 
  Verifying  : nodejs-negotiator-0.4.3-2.el6.noarch                       51/52 
  Verifying  : nodejs-buffer-crc32-0.2.1-6.el6.noarch                     52/52 

Installed:
  nodejs.x86_64 0:0.10.36-3.el6                                                 
  nodejs-ejs.noarch 0:1.0.0-1.el6                                               
  nodejs-express.noarch 0:3.5.2-2.el6                                           
  nodejs-mysql.noarch 0:2.0.0-alpha9.2.el6.2                                    

Dependency Installed:
  c-ares19.x86_64 0:1.9.1-5.el6.3                                               
  http-parser.x86_64 0:2.0-4.20121128gitcd01361.el6                             
  libicu.x86_64 0:4.2.1-12.el6                                                  
  libuv.x86_64 1:0.10.34-1.el6                                                  
  nodejs-basic-auth-connect.noarch 0:1.0.0-1.el6                                
  nodejs-batch.noarch 0:0.5.0-2.el6                                             
  nodejs-bignumber-js.noarch 0:1.2.0-4.el6                                      
  nodejs-buffer-crc32.noarch 0:0.2.1-6.el6                                      
  nodejs-bytes.noarch 0:0.3.0-2.el6                                             
  nodejs-commander.noarch 0:2.2.0-2.el6                                         
  nodejs-compressible.noarch 0:1.0.1-2.el6                                      
  nodejs-compression.noarch 0:1.0.1-3.el6                                       
  nodejs-connect.noarch 0:2.14.5-3.el6                                          
  nodejs-connect-timeout.noarch 0:1.0.0-1.el6                                   
  nodejs-cookie.noarch 0:0.1.2-2.el6                                            
  nodejs-cookie-parser.noarch 0:1.0.1-4.el6                                     
  nodejs-cookie-signature.noarch 0:1.0.3-1.el6                                  
  nodejs-csurf.noarch 0:1.1.0-2.el6                                             
  nodejs-debug.noarch 0:0.8.1-2.el6                                             
  nodejs-errorhandler.noarch 0:1.0.0-2.el6                                      
  nodejs-express-session.noarch 0:1.0.2-3.el6                                   
  nodejs-fresh.noarch 0:0.2.2-1.el6                                             
  nodejs-merge-descriptors.noarch 0:0.0.2-1.el6                                 
  nodejs-method-override.noarch 0:1.0.0-1.el6                                   
  nodejs-methods.noarch 0:0.1.0-1.el6                                           
  nodejs-mime.noarch 0:1.2.11-1.el6                                             
  nodejs-mkdirp.noarch 0:0.3.5-3.el6                                            
  nodejs-morgan.noarch 0:1.0.0-3.el6                                            
  nodejs-multiparty.noarch 0:3.2.4-2.el6                                        
  nodejs-negotiator.noarch 0:0.4.3-2.el6                                        
  nodejs-parseurl.noarch 0:1.0.1-2.el6                                          
  nodejs-pause.noarch 0:0.0.1-3.el6                                             
  nodejs-qs.noarch 0:0.6.6-3.el6                                                
  nodejs-range-parser.noarch 0:1.0.0-1.el6                                      
  nodejs-raw-body.noarch 0:1.1.4-2.el6                                          
  nodejs-require-all.noarch 0:0.0.6-3.el6                                       
  nodejs-response-time.noarch 0:1.0.0-1.el6                                     
  nodejs-scmp.noarch 0:0.0.3-2.el6                                              
  nodejs-send.noarch 0:0.3.0-4.el6                                              
  nodejs-serve-index.noarch 0:1.0.1-4.el6                                       
  nodejs-serve-static.noarch 0:1.1.0-2.el6                                      
  nodejs-setimmediate.noarch 0:1.0.1-2.el6                                      
  nodejs-static-favicon.noarch 0:1.0.2-2.el6                                    
  nodejs-stream-counter.noarch 0:0.2.0-3.el6                                    
  nodejs-uid2.noarch 0:0.0.3-3.el6                                              
  nodejs-utils-merge.noarch 0:1.0.0-1.el6                                       
  nodejs-vhost.noarch 0:1.0.0-1.el6                                             
  v8.x86_64 1:3.14.5.10-17.el6                                                  

Complete!
 ---> 291014efa584
Removing intermediate container f0057855670e
Step 4 : RUN mkdir /root/app
 ---> Running in 10df51b0f943
 ---> e3177b586f44
Removing intermediate container 10df51b0f943
Step 5 : ADD app /root/app
 ---> d3bdaf36fead
Removing intermediate container d029a3589c88
Step 6 : ADD init.sh /usr/local/bin/init.sh
 ---> e45c90d72124
Removing intermediate container 4a58f7bd18e2
Step 7 : RUN chmod u+x /usr/local/bin/init.sh
 ---> Running in 9d40eadc6cc2
 ---> c5db4944600c
Removing intermediate container 9d40eadc6cc2
Step 8 : ENV NODE_DBNAME shorturl_service
 ---> Running in 22d591810080
 ---> a683bdc0aa59
Removing intermediate container 22d591810080
Step 9 : ENV NODE_DBUSER nodeuser
 ---> Running in 7054689c5c1d
 ---> ea82bb3d4709
Removing intermediate container 7054689c5c1d
Step 10 : ENV NODE_DBPASS pas4mysql
 ---> Running in d1e957635cdc
 ---> 4fefba022dc9
Removing intermediate container d1e957635cdc
Step 11 : ENV NODE_PATH /usr/lib/node_modules
 ---> Running in 3a00de8c219d
 ---> c916dd989e6f
Removing intermediate container 3a00de8c219d
Step 12 : CMD /usr/local/bin/init.sh
 ---> Running in 541fc33575cc
 ---> f6225fc864cf
Removing intermediate container 541fc33575cc
Successfully built f6225fc864cf
Build succeeded. Your change will be committed.

[dockerbon 3d12b5e] Commit to build an image.
 1 file changed, 1 insertion(+), 1 deletion(-)
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# 
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# docker run -itd -p 8000:80 --link mysql01:db --name shorturl_01 decoy2015/shorturl:ver1.0
89bdb4eff36de7d31725eef8b3763fb4080f4a1cf96ec78f9ce6a49604d1ad71
Error response from daemon: Cannot start container 89bdb4eff36de7d31725eef8b3763fb4080f4a1cf96ec78f9ce6a49604d1ad71: Cannot link to a non running container: /mysql01 AS /shorturl_01/db
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# docker run -itd -p 8000:80 --link mysql01:db --name shorturl_01 decoy2015/shorturl:ver1.0
Error response from daemon: Conflict. The name "shorturl_01" is already in use by container 89bdb4eff36d. You have to delete (or rename) that container to be able to reuse that name.
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# docker images
REPOSITORY                  TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
decoy2015/shorturl          ver1.0              f6225fc864cf        2 minutes ago       330.3 MB
decoy2015/mysql             ver1.0              54411d654488        4 days ago          320.1 MB
<none>                      <none>              5aaa1d496c79        5 days ago          271.2 MB
decoy2015/rails             ver1.0              53749e423bcd        6 days ago          748.6 MB
<none>                      <none>              b1811e31ba72        6 days ago          732.6 MB
decoy2015/httpd             ver1.0              ea432a94a200        6 days ago          271.2 MB
docker.io/hello-world       latest              975b84d108f1        12 weeks ago        960 B
docker.io/enakai00/centos   centos6             a005304e4e74        6 months ago        203.1 MB
docker.io/enakai00/centos   centos7             7322fbe74aa5        6 months ago        172.2 MB
docker.io/enakai00/centos   latest              7322fbe74aa5        6 months ago        172.2 MB
docker.io/enakai00/fedora   21                  e26efd418c48        7 months ago        241.3 MB
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# docker ps -a
CONTAINER ID        IMAGE                                                              COMMAND                  CREATED              STATUS                       PORTS               NAMES
89bdb4eff36d        decoy2015/shorturl:ver1.0                                          "/usr/local/bin/init."   About a minute ago   Created                                          shorturl_01
5512bafb85a9        decoy2015/mysql:ver1.0                                             "/usr/local/bin/init."   16 minutes ago       Exited (137) 3 minutes ago                       mysql01
79e12fe19431        hello-world                                                        "/hello"                 20 minutes ago       Exited (0) 20 minutes ago                        compassionate_pasteur
81bc67442f2f        3365b159361270a1a1d8b694c4d0e70169c4057adcbeb2b0c721d491eea2dd4b   "/bin/sh -c '#(nop) A"   5 days ago           Dead                                             thirsty_kilby
c0159b834e8f        3103456a227399abc6c013d616a24ec7ddec0dba138d30e12707ba70606e807b   "/bin/sh -c '#(nop) A"   6 days ago           Dead                                             cocky_brown
4bf3a5a86318        64426e5e51d5c5b618c6ce2bfea1efb0ed9decc52a44e578a798029fcb04ad10   "/bin/sh -c '#(nop) A"   6 days ago           Dead                                             backstabbing_saha
77f475a73cf0        enakai00/centos:centos6                                            "/bin/bash"              6 days ago           Exited (137) 6 days ago                          centos01
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# docker rm 89bdb4eff36d
EOF.
* Are you trying to connect to a TLS-enabled daemon without TLS?
* Is your docker daemon up and running?
Error: failed to remove containers: [89bdb4eff36d]
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# 
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# service docker start
Redirecting to /bin/systemctl start  docker.service
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# docker rm 89bdb4eff36d
89bdb4eff36d
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# docker ps -a
CONTAINER ID        IMAGE                                                              COMMAND                  CREATED             STATUS                       PORTS               NAMES
5512bafb85a9        decoy2015/mysql:ver1.0                                             "/usr/local/bin/init."   17 minutes ago      Exited (137) 4 minutes ago                       mysql01
79e12fe19431        hello-world                                                        "/hello"                 21 minutes ago      Exited (0) 21 minutes ago                        compassionate_pasteur
81bc67442f2f        3365b159361270a1a1d8b694c4d0e70169c4057adcbeb2b0c721d491eea2dd4b   "/bin/sh -c '#(nop) A"   5 days ago          Dead                                             thirsty_kilby
c0159b834e8f        3103456a227399abc6c013d616a24ec7ddec0dba138d30e12707ba70606e807b   "/bin/sh -c '#(nop) A"   6 days ago          Dead                                             cocky_brown
4bf3a5a86318        64426e5e51d5c5b618c6ce2bfea1efb0ed9decc52a44e578a798029fcb04ad10   "/bin/sh -c '#(nop) A"   6 days ago          Dead                                             backstabbing_saha
77f475a73cf0        enakai00/centos:centos6                                            "/bin/bash"              6 days ago          Exited (137) 6 days ago                          centos01
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# docker run -itd -p 8000:80 --link mysql01:db --name shorturl_01 decoy2015/shorturl:ver1.0
6cacab4e47cf733f52aabd8dc70227bf7d3c606ddd87ed23e9a26dde06a07e94
Error response from daemon: Cannot start container 6cacab4e47cf733f52aabd8dc70227bf7d3c606ddd87ed23e9a26dde06a07e94: Cannot link to a non running container: /mysql01 AS /shorturl_01/db
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# docker ps -a
CONTAINER ID        IMAGE                                                              COMMAND                  CREATED             STATUS                       PORTS               NAMES
6cacab4e47cf        decoy2015/shorturl:ver1.0                                          "/usr/local/bin/init."   23 seconds ago      Created                                          shorturl_01
5512bafb85a9        decoy2015/mysql:ver1.0                                             "/usr/local/bin/init."   18 minutes ago      Exited (137) 4 minutes ago                       mysql01
79e12fe19431        hello-world                                                        "/hello"                 22 minutes ago      Exited (0) 22 minutes ago                        compassionate_pasteur
81bc67442f2f        3365b159361270a1a1d8b694c4d0e70169c4057adcbeb2b0c721d491eea2dd4b   "/bin/sh -c '#(nop) A"   5 days ago          Dead                                             thirsty_kilby
c0159b834e8f        3103456a227399abc6c013d616a24ec7ddec0dba138d30e12707ba70606e807b   "/bin/sh -c '#(nop) A"   6 days ago          Dead                                             cocky_brown
4bf3a5a86318        64426e5e51d5c5b618c6ce2bfea1efb0ed9decc52a44e578a798029fcb04ad10   "/bin/sh -c '#(nop) A"   6 days ago          Dead                                             backstabbing_saha
77f475a73cf0        enakai00/centos:centos6                                            "/bin/bash"              6 days ago          Exited (137) 6 days ago                          centos01
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# history | grep run
   40  docker run -it --name centos01 enakai00/centos:centos6 /bin/bash
  121  docker run -itd -p 8000:80 --name rails01 decoy2015/rails:ver1.0
  230  docker run -itd --name mysql01 decoy2015/mysql:run1.0
  231  docker run -itd --name mysql01 decoy2015/mysql:ver1.0
  260  docker run hello-world
  262  docker run hello-world
  265  docker run -itd --name mysql01 decoy2015/mysql:ver1.0
  272  docker run -itd --name mysql01 decoy2015/mysql:ver1.0
  290  docker run -itd -p 8000:80 --link mysql01:db --name shorturl_01 decoy2015/shorturl:ver1.0
  292  docker run -itd -p 8000:80 --link mysql01:db --name shorturl_01 decoy2015/shorturl:ver1.0
  300  docker run -itd -p 8000:80 --link mysql01:db --name shorturl_01 decoy2015/shorturl:ver1.0
  303  history | grep run
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# docker run -itd --name mysql01 decoy2015/mysql:ver1.0
Error response from daemon: Conflict. The name "mysql01" is already in use by container 5512bafb85a9. You have to delete (or rename) that container to be able to reuse that name.
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# docker rm mysql01
mysql01
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# docker run -itd --name mysql01 decoy2015/mysql:ver1.0
3d33f493c2e827745706f3c4242a82e516ae34665fa2d857e25698cb05bc119b
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# docker ps
CONTAINER ID        IMAGE                    COMMAND                  CREATED             STATUS              PORTS               NAMES
3d33f493c2e8        decoy2015/mysql:ver1.0   "/usr/local/bin/init."   5 seconds ago       Up 4 seconds        3006/tcp            mysql01
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# !300
docker run -itd -p 8000:80 --link mysql01:db --name shorturl_01 decoy2015/shorturl:ver1.0
Error response from daemon: Conflict. The name "shorturl_01" is already in use by container 6cacab4e47cf. You have to delete (or rename) that container to be able to reuse that name.
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# docker ps -a | grep shorturl_01
6cacab4e47cf        decoy2015/shorturl:ver1.0                                          "/usr/local/bin/init."   3 minutes ago       Created                                         shorturl_01
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# docker rm decoy2015/shorturl:ver1.0
Error response from daemon: no such id: decoy2015/shorturl:ver1.0
Error: failed to remove containers: [decoy2015/shorturl:ver1.0]
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# docker rm 6cacab4e47cf
6cacab4e47cf
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# !300
docker run -itd -p 8000:80 --link mysql01:db --name shorturl_01 decoy2015/shorturl:ver1.0
a7a092b833a999c827fe023881ac637be9d7eee7de11becb3c2779bec35a804a
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# docker ps
CONTAINER ID        IMAGE                       COMMAND                  CREATED              STATUS              PORTS                  NAMES
a7a092b833a9        decoy2015/shorturl:ver1.0   "/usr/local/bin/init."   8 seconds ago        Up 7 seconds        0.0.0.0:8000->80/tcp   shorturl_01
3d33f493c2e8        decoy2015/mysql:ver1.0      "/usr/local/bin/init."   About a minute ago   Up About a minute   3006/tcp               mysql01
[root@docker-jissen-centos-1gb-sgp1-01 build_shorturl]# docker attach a7a092b833a9

[root@a7a092b833a9 app]# pwd
/root/app
[root@a7a092b833a9 app]# ls
server.js  views
[root@a7a092b833a9 app]# cd ..
[root@a7a092b833a9 ~]# ls
app
[root@a7a092b833a9 ~]# cd ..
[root@a7a092b833a9 /]# ls
bin  etc   lib    lost+found  mnt  proc  run   selinux  sys  usr
dev  home  lib64  media       opt  root  sbin  srv      tmp  var
[root@a7a092b833a9 /]# cd var/
cache/    empty/    lib/      lock/     mail/     opt/      run/      tmp/      
db/       games/    local/    log/      nis/      preserve/ spool/    yp/       
[root@a7a092b833a9 /]# cd var/log/
[root@a7a092b833a9 log]# ls
btmp  lastlog  tallylog  wtmp  yum.log
[root@a7a092b833a9 log]# ls -ort
total 4
-rw------- 1 root    0 Jun 15  2015 tallylog
-rw-r--r-- 1 root    0 Jun 15  2015 lastlog
-rw-rw-r-- 1 root    0 Jun 15  2015 wtmp
-rw------- 1 root    0 Jun 15  2015 btmp
-rw------- 1 root 3322 Jan  9 09:25 yum.log
[root@a7a092b833a9 log]# exit
```
